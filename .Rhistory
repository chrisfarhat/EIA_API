price = as.numeric(rapply(data_nested, function(x) x[2], how= "unlist")))
data
data_nested
data
data_nested
t1<-rapply(data_nested, function(X) x[1], how = "unlist")
?unlist
unlist(data_nested)
str(data_nested)
plot(data_nested)
ul<-unlist(data_nested)
str(ul)
?rbind
# script to access the EIA's beta API, convert data, then plot
# requires a unique API key which can be obtained at: http://www.eia.gov/beta/api/
#series
series = "ELEC.PRICE."
#Two letter state abbreviation
state = "TX"
#Type All = All, Residential =
type = "ALL"
#Time A = Annual, M = Monthly, Q = Quarterly
time = "A"
#API Key
key <- scan("/Users/jim/Documents/R/private_EIA_API_key.txt", what = "character")
require(RCurl)
require(RJSONIO)
#Create API url
id<-paste(series,state,"-",type,".",time, sep="")
api<-paste("http://api.eia.gov/series/data?api_key=",key,"&series_id=",id, sep="")
#Get data via RCurl
data_json<-getURL(api, followlocation = TRUE)
#Convert JSON format to R format, then flatten structure
data_nested<-fromJSON(data_json, nullValue="NA")[[2]]
data<-unlist(data_nested)
data
data[1]
data[0]
data[2]
len(data_nested)
length(data_nested)
length(data_nested)
length(data)
data_nested<-fromJSON(data_json, nullValue="NA")[[2]]
len<-(length(unlist(data_nested))-2)
df <- data.frame(matrix(unlist(data_nested), nrow=len, byrow=2))
data
len
data_nested
data
str(data)
data_nested<-fromJSON(data_json, nullValue="NA")[[2]]
len<-(length(unlist(data_nested))-1)
df <- data.frame(matrix(unlist(data_nested), nrow=len, byrow=2))
df <- data.frame(matrix(unlist(data_nested[-1]), nrow=len, byrow=2))
data_nested[-1]
#Convert JSON format to R format, then flatten structure
data_nested<-fromJSON(data_json, nullValue="NA")[[2]]
ul_data<-unlist(data_nested)
len<-length(ul_data-1)
type(ul_data)
str(ul_data)
?unlist
ul_data[-1:]
ul_data[-1]
df <- data.frame(matrix(ul_data[1], nrow=len, byrow=2))
df
str(df)
df <- data.frame(matrix(ul_data, nrow=len, byrow=2))
ul_data<-unlist(data_nested[-1])
len<-length(ul_data-1)
df <- data.frame(matrix(ul_data, nrow=len, byrow=2))
require(plyr)
install.packages("plyr")
require(plyr)
df <- ldply (data_nested, data.frame)
str(df)
df
str(df)
?plyr
?ldply
#series
series = "ELEC.PRICE."
#Two letter state abbreviation
state = "TX"
#Type All = All, Residential =
type = "ALL"
#Time A = Annual, M = Monthly, Q = Quarterly
time = "A"
#API Key
key <- scan("/Users/jim/Documents/R/private_EIA_API_key.txt", what = "character")
require(RCurl)
require(RJSONIO)
require(plyr)
#Create API url
id<-paste(series,state,"-",type,".",time, sep="")
api<-paste("http://api.eia.gov/series/data?api_key=",key,"&series_id=",id, sep="")
#Get data via RCurl
data_json<-getURL(api, followlocation = TRUE)
#Convert JSON format to R format, then flatten structure
data_nested
install.packages("jsonlite")
flatten(data_json)
require(jsonlite)
flatten(data_json)
flatten(data_nested)
data_json<-getURL(api, followlocation = TRUE)
#Convert JSON format to R format, then flatten structure
data_nested<-fromJSON(data_json, nullValue="NA")[[2]]
#Convert JSON format to R format, then flatten structure
data <- fromJSON(data_json, flatten = true)
data
# script to access the EIA's beta API, convert data, then plot
# requires a unique API key which can be obtained at: http://www.eia.gov/beta/api/
require(RCurl)
require(plyr)
require(jsonlite)
#series
series = "ELEC.PRICE."
#Two letter state abbreviation
state = "TX"
#Type All = All, Residential =
type = "ALL"
#Time A = Annual, M = Monthly, Q = Quarterly
time = "A"
#API Key
key <- scan("/Users/jim/Documents/R/private_EIA_API_key.txt", what = "character")
#Create API url
id<-paste(series,state,"-",type,".",time, sep="")
api<-paste("http://api.eia.gov/series/data?api_key=",key,"&series_id=",id, sep="")
#Get data via RCurl
data_json<-getURL(api, followlocation = TRUE)
#Convert JSON format to R format, then flatten structure
data <- fromJSON(data_json, flatten = true)
data
# script to access the EIA's beta API, convert data, then plot
# requires a unique API key which can be obtained at: http://www.eia.gov/beta/api/
require(RCurl)
require(plyr)
require(jsonlite)
#series
series = "ELEC.PRICE."
#Two letter state abbreviation
state = "TX"
#Type All = All, Residential =
type = "ALL"
#Time A = Annual, M = Monthly, Q = Quarterly
time = "A"
#API Key
key <- scan("/Users/jim/Documents/R/private_EIA_API_key.txt", what = "character")
#Create API url
id<-paste(series,state,"-",type,".",time, sep="")
api<-paste("http://api.eia.gov/series/data?api_key=",key,"&series_id=",id, sep="")
#Get data via RCurl
data_json<-getURL(api, followlocation = TRUE)
#Convert JSON format to R format, then flatten structure
data <- fromJSON(data_json, flatten = true)
data
str(data)
plot(data)
summary(data)
data[1]
data_nested <- fromJSON(data_json)
data_flat <- flatten(data_nested)
data_flat <- flatten(as.data_frame(data_nested)
)
?as
?as.data.frame
data_nested <- fromJSON(data_json)
data_flat <- flatten(as.data.frame(data_nested)
)
data_flat
data_flat <- flatten(as.data.frame(data_nested), recursive = TRUE)
data_flat
data_json<-getURL(api, followlocation = TRUE)
#Convert JSON format to R format, then flatten structure
data <- fromJSON(data_json, flatten = TRUE)
data
data_nested <- fromJSON(data_json)
data_flat <- flatten(as.data.frame(data_nested))
data_flat
str(data_flay)
str(data_flat)
data_flat.series_data.data
data_flat.series_data
summary(data_flat)
colnames(data_flat)
data_flat.request.command
data_flat[request.command]
data_flat$request.command
data_flat$series_data.data
plot(data_flat$series_data.data)
ed <- fromJSON(data_json)
data_flat <- flatten(as.data.frame(data_nested))
data <- dat
#Convert JSON format to R format, then flatten structure
data_nested <- fromJSON(data_json)
data_flat <- flatten(as.data.frame(data_nested))
data <- data_flat$series_data.data
str(data)
data[0]
data[1]
data[,1]
summary(data)
str(data)
d<-rbind(data)
d
str(d)
plot(d)
d
d<-data.frame(data)
d
data
d
?data.frame
plot(d)
str(d)
summary(d)
d<-as.data.frame(data)
d
str(d)
str(d)
str(data)
data
data[1]
data[1,1]
data[,2
]
data[]
data[0]
data[1
]
data[3]
data[1]
d<-data.frame(data[1])
d
str(d)
summary(d)
plot(d)
?rbind
c <-rbind(data)
c
d<-rbind(data.frame(data[1]))
d
str(d)
data_nested <- fromJSON(data_json)
data_flat <- flatten(as.data.frame(data_nested))
data <- data_flat$series_data.data
d<-data.frame(data)
names(d)<-c('YEAR','ELEC.PRICE')
d
names(d)<-c('YEAR','ELEC.PRICE')
d$ELEC.PRICE<-as.numeric(d$ELEC.PRICE)
d$ELEC.PRICE<-as.numeric(d$ELEC.PRICE)
d$YEAR<-as.numeric(d$YEAR)
d
d$ELEC.PRICE<-as.numeric(d$ELEC.PRICE)
d$YEAR<-as.Date(d$YEAR, %Y)
d$YEAR<-format(as.Date(d$YEAR),%Y)
d$YEAR<-as.Date(d$YEAR)
d$YEAR<-as.Date(d$YEAR, "%Y")
#Get data via RCurl
data_json<-getURL(api, followlocation = TRUE)
#Convert JSON format to R format, then flatten structure
data_nested <- fromJSON(data_json)
data_flat <- flatten(as.data.frame(data_nested))
data <- data_flat$series_data.data
d<-data.frame(data)
names(d)<-c('YEAR','ELEC.PRICE')
d$ELEC.PRICE<-as.numeric(d$ELEC.PRICE)
d$YEAR<-as.Date(d$YEAR, "%Y")
str(d
)
plot(d)
# script to access the EIA's beta API, convert data, then plot
# requires a unique API key which can be obtained at: http://www.eia.gov/beta/api/
require(RCurl)
require(plyr)
require(jsonlite)
#series
series = "ELEC.PRICE."
#Two letter state abbreviation
state = "TX"
#Type All = All, Residential =
type = "ALL"
#Time A = Annual, M = Monthly, Q = Quarterly
time = "A"
#API Key
key <- scan("/Users/jim/Documents/R/private_EIA_API_key.txt", what = "character")
#Create API url
id<-paste(series,state,"-",type,".",time, sep="")
api<-paste("http://api.eia.gov/series/data?api_key=",key,"&series_id=",id, sep="")
#Get data via RCurl
data_json<-getURL(api, followlocation = TRUE)
#Convert JSON format to R format, then flatten structure
data_nested <- fromJSON(data_json)
data_flat <- flatten(as.data.frame(data_nested))
data <- data_flat$series_data.data
data<-data.frame(data)
names(data)<-c('YEAR','ELEC.PRICE')
data$ELEC.PRICE<-as.numeric(data$ELEC.PRICE)
data$YEAR<-as.Date(data$YEAR, "%Y")
plot(data, main = id, type = "b")
# script to access the EIA's beta API, convert data, then plot
# requires a unique API key which can be obtained at: http://www.eia.gov/beta/api/
require(RCurl)
require(plyr)
require(jsonlite)
#series
series = "ELEC.PRICE."
#Two letter state abbreviation
state = "TX"
#Type All = All, Residential =
type = "ALL"
#Time A = Annual, M = Monthly, Q = Quarterly
time = "A"
#API Key
key <- scan("/Users/jim/Documents/R/private_EIA_API_key.txt", what = "character")
#Create API url
id<-paste(series,state,"-",type,".",time, sep="")
api<-paste("http://api.eia.gov/series/data?api_key=",key,"&series_id=",id, sep="")
#Get data via RCurl
data_json<-getURL(api, followlocation = TRUE)
#Convert JSON format to R format, then flatten structure
data_nested <- fromJSON(data_json)
data_flat <- flatten(as.data.frame(data_nested))
data <- data_flat$series_data.data
data<-data.frame(data)
names(data)<-c('YEAR', series)
data$ELEC.PRICE<-as.numeric(data$ELEC.PRICE)
data$YEAR<-as.Date(data$YEAR, "%Y")
plot(data, main = id, type = "b")
# script to access the EIA's beta API, convert data, then plot
# requires a unique API key which can be obtained at: http://www.eia.gov/beta/api/
require(RCurl)
require(plyr)
require(jsonlite)
#series
series = "ELEC.PRICE."
#Two letter state abbreviation
state = "TX"
#Type All = All, Residential =
type = "ALL"
#Time A = Annual, M = Monthly, Q = Quarterly
time = "A"
#API Key
key <- scan("/Users/jim/Documents/R/private_EIA_API_key.txt", what = "character")
#Create API url
id<-paste(series,state,"-",type,".",time, sep="")
api<-paste("http://api.eia.gov/series/data?api_key=",key,"&series_id=",id, sep="")
#Get data via RCurl
data_json<-getURL(api, followlocation = TRUE)
#Convert JSON format to R format, then flatten structure
data_nested <- fromJSON(data_json)
data_flat <- flatten(as.data.frame(data_nested))
data <- data_flat$series_data.data
data<-data.frame(data)
names(data)<-c('YEAR', series)
data$ELEC.PRICE<-as.numeric(data$ELEC.PRICE)
data$YEAR<-as.Date(data$YEAR, "%Y")
plot(data, main = id, type = "b")
# script to access the EIA's beta API, convert data, then plot
# requires a unique API key which can be obtained at: http://www.eia.gov/beta/api/
require(RCurl)
require(plyr)
require(jsonlite)
#series
series = "ELEC.PRICE."
#Two letter state abbreviation
state = "TX"
#Type All = All, Residential =
type = "ALL"
#Time A = Annual, M = Monthly, Q = Quarterly
time = "A"
#API Key
key <- scan("/Users/jim/Documents/R/private_EIA_API_key.txt", what = "character")
#Create API url
id<-paste(series,state,"-",type,".",time, sep="")
api<-paste("http://api.eia.gov/series/data?api_key=",key,"&series_id=",id, sep="")
#Get data via RCurl
data_json<-getURL(api, followlocation = TRUE)
#Convert JSON format to R format, then flatten structure
data_nested <- fromJSON(data_json)
data_flat <- flatten(as.data.frame(data_nested))
data <- data_flat$series_data.data
data<-data.frame(data)
names(data)<-c('YEAR', 'ELEC.PRICE')
data$ELEC.PRICE<-as.numeric(data$ELEC.PRICE)
data$YEAR<-as.Date(data$YEAR, "%Y")
plot(data, main = id, type = "b")
#series
series = "ELEC.PRICE."
#Two letter state abbreviation
state = "TX"
#Type All = All, Residential =
type = "ALL"
#Time A = Annual, M = Monthly, Q = Quarterly
time = "A"
#API Key
key <- scan("/Users/jim/Documents/R/private_EIA_API_key.txt", what = "character")
EIA_QUERY(series, state, type, time, key)
Plot(data)
# script to access the EIA's beta API, convert data, then plot
# requires a unique API key which can be obtained at: http://www.eia.gov/beta/api/
require(RCurl)
require(plyr)
require(jsonlite)
#series
series = "ELEC.PRICE."
#Two letter state abbreviation
state = "TX"
#Type All = All, Residential =
type = "ALL"
#Time A = Annual, M = Monthly, Q = Quarterly
time = "A"
#API Key
key <- scan("/Users/jim/Documents/R/private_EIA_API_key.txt", what = "character")
#Create API url
id<-paste(series,state,"-",type,".",time, sep="")
api<-paste("http://api.eia.gov/series/data?api_key=",key,"&series_id=",id, sep="")
#Get data via RCurl
data_json<-getURL(api, followlocation = TRUE)
#Convert JSON format to R format, then flatten structure
data_nested <- fromJSON(data_json)
data_flat <- flatten(as.data.frame(data_nested))
data <- data_flat$series_data.data
data<-data.frame(data)
names(data)<-c('YEAR', 'ELEC.PRICE')
data$ELEC.PRICE<-as.numeric(data$ELEC.PRICE)
data$YEAR<-as.Date(data$YEAR, "%Y")
plot(data, main = id, type = "b")
api
# script to access the EIA's beta API, convert data, then plot
# requires a unique API key which can be obtained at: http://www.eia.gov/beta/api/
require(RCurl)
require(plyr)
require(jsonlite)
#series
series = "ELEC.PRICE."
#Two letter state abbreviation
state = "TX"
#Type All = All, Residential =
type = "ALL"
#Time A = Annual, M = Monthly, Q = Quarterly
time = "M"
#API Key
key <- scan("/Users/jim/Documents/R/private_EIA_API_key.txt", what = "character")
#Create API url
id<-paste(series,state,"-",type,".",time, sep="")
api<-paste("http://api.eia.gov/series/data?api_key=",key,"&series_id=",id, sep="")
#Get data via RCurl
data_json<-getURL(api, followlocation = TRUE)
#Convert JSON format to R format, then flatten structure
data_nested <- fromJSON(data_json)
data_flat <- flatten(as.data.frame(data_nested))
data <- data_flat$series_data.data
data<-data.frame(data)
names(data)<-c('YEAR', 'ELEC.PRICE')
data$ELEC.PRICE<-as.numeric(data$ELEC.PRICE)
data$YEAR<-as.Date(data$YEAR, "%Y")
plot(data, main = id, type = "b")
#API Key
key <- scan("/Users/jim/Documents/R/private_EIA_API_key.txt", what = "character")
#Create API url
id<-paste(series,state,"-",type,".",time, sep="")
api<-paste("http://api.eia.gov/category/?api_key=",key,"&category_id=371" sep="")
#API Key
key <- scan("/Users/jim/Documents/R/private_EIA_API_key.txt", what = "character")
#Create API url
id<-paste(series,state,"-",type,".",time, sep="")
api<-paste("http://api.eia.gov/category/?api_key=",key,"&category_id=371", sep="")
#Get data via RCurl
data_json<-getURL(api, followlocation = TRUE)
data_json
data_nested <- fromJSON(data_json)
data_flat <- flatten(as.data.frame(data_nested))
data_nested
api<-paste("http://api.eia.gov/category/?api_key=",key,"&category_id=293779", sep="")
#Get data via RCurl
data_json<-getURL(api, followlocation = TRUE)
data_nested <- fromJSON(data_json)
data_flat <- flatten(as.data.frame(data_nested))
data_nested
# script to access the EIA's beta API, convert data, then plot
# requires a unique API key which can be obtained at: http://www.eia.gov/beta/api/
require(RCurl)
require(plyr)
require(jsonlite)
#series
series = "PET.PRICE."
#Two letter state abbreviation
state = "TX"
#Type All = All, Residential =
type = "ALL"
#Time A = Annual, M = Monthly, Q = Quarterly
time = "M"
#API Key
key <- scan("/Users/jim/Documents/R/private_EIA_API_key.txt", what = "character")
#Create API url
id<-paste(series,state,"-",type,".",time, sep="")
api<-paste("http://api.eia.gov/series/data?api_key=",key,"&series_id=",id, sep="")
#Get data via RCurl
data_json<-getURL(api, followlocation = TRUE)
#Convert JSON format to R format, then flatten structure
data_nested <- fromJSON(data_json)
data_flat <- flatten(as.data.frame(data_nested))
data <- data_flat$series_data.data
data<-data.frame(data)
names(data)<-c('YEAR', 'ELEC.PRICE')
data$ELEC.PRICE<-as.numeric(data$ELEC.PRICE)
data$YEAR<-as.Date(data$YEAR, "%Y")
plot(data, main = id, type = "b")
